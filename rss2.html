<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>yym&#39;s blog</title>
    <link>http://www.yym.show/</link>
    
    <atom:link href="/rss2.html" rel="self" type="application/rss+xml"/>
    
    <description>hello world</description>
    <pubDate>Thu, 02 Jul 2020 06:26:09 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>BUUCTF-流量分析刷题记录</title>
      <link>http://www.yym.show/2020-06-30-BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/</link>
      <guid>http://www.yym.show/2020-06-30-BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/</guid>
      <pubDate>Tue, 30 Jun 2020 07:14:00 GMT</pubDate>
      <description>
      
        
        
          &lt;h3 id=&quot;一丶wireshark&quot;&gt;&lt;a href=&quot;#一丶wireshark&quot; class=&quot;headerlink&quot; title=&quot;一丶wireshark&quot;&gt;&lt;/a&gt;一丶wireshark&lt;/h3&gt;&lt;p&gt;&lt;img src= &quot;/img/loading.gif&quot; data-
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h3 id="一丶wireshark"><a href="#一丶wireshark" class="headerlink" title="一丶wireshark"></a>一丶wireshark</h3><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200630153805782.png" alt="image-20200630153805782"></p><p><strong>本题要点：</strong></p><ul><li>分组字节流搜索</li></ul><p>因为题目提示了登陆网站的密码就是flag，所以尝试直接在分组字节流中搜索<code>password</code></p><p>轻松秒杀：</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200630154155787.png" alt="image-20200630154155787"></p><p>flag:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">flag&#123;ffb7567a1d4f4abdffdb54e022f8facd&#125;</span><br></pre></td></tr></table></figure><h3 id="二丶被嗅探的流量"><a href="#二丶被嗅探的流量" class="headerlink" title="二丶被嗅探的流量"></a>二丶被嗅探的流量</h3><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200630154406540.png" alt="image-20200630154406540"></p><p><strong>本题要点：</strong></p><ul><li>分组字节流搜索</li></ul><p>一开始以为这道题需要提取tcp传输的文件，没想到。。。</p><p>直接尝试分组字节流里搜索一下flag得到flag：</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200630154902924.png" alt="image-20200630154902924"></p><p>flag:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">flag&#123;da73d88936010da1eeeb36e945ec4b97&#125;</span><br></pre></td></tr></table></figure><h3 id="三丶easycap"><a href="#三丶easycap" class="headerlink" title="三丶easycap"></a>三丶easycap</h3><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200630155023787.png" alt="image-20200630155023787"></p><p><strong>本题要点：</strong></p><ul><li>TCP流追踪</li></ul><p>这道题名字居然是easycap？？瞧不起谁呢？</p><p>应该是我瞧不起这道题了，一步秒杀，的确easy</p><p>打开流量包发现全是TCP协议包，本能反应追踪TCP流</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200630155417736.png" alt="image-20200630155417736"></p><p>得到flag</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200630155431755.png" alt="image-20200630155431755"></p><p>flag：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">flag&#123;385b87afc8671dee07550290d16a8071&#125;</span><br></pre></td></tr></table></figure><h3 id="四丶数据包中的线索"><a href="#四丶数据包中的线索" class="headerlink" title="四丶数据包中的线索"></a>四丶数据包中的线索</h3><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200630163445917.png" alt="image-20200630163445917"></p><p><strong>本题要点：</strong></p><ul><li>导出HTTP对象</li><li>base64解密</li></ul><p>这道题有一点小坑，我导出数据之后再base64解密后图片无法显示，也不知道哪里搞错了，不过后来直接在wireshark里解密转图片了</p><p>大致思路就是看到全是tcp流量，然后观察一下发现有数据传输，然后显示分组字节流</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200630185219536.png" alt="image-20200630185219536"></p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200630185238871.png" alt="image-20200630185238871"></p><p>然后观察数据猜测是base64编码，然后观察解码后的数据，文件头是jpg，然后转成图片得到flag</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200630185339209.png" alt="image-20200630185339209"></p><p>flag：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">flag&#123;209acebf6324a09671abc31c869de72c&#125;</span><br></pre></td></tr></table></figure><h3 id="五丶被劫持的神秘礼物"><a href="#五丶被劫持的神秘礼物" class="headerlink" title="五丶被劫持的神秘礼物"></a>五丶被劫持的神秘礼物</h3><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200630190024819.png" alt="image-20200630190024819"></p><p><strong>本题要点：</strong></p><ul><li>分组字节流搜索</li><li>md5加密</li></ul><p>说明越详细，题目越简单，分组字节流搜索<code>password</code>轻松秒杀、</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200630190231735.png" alt="image-20200630190231735"></p><p>md5加密得：</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200630190249805.png" alt="image-20200630190249805"></p><p>flag：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">flag&#123;1d240aafe21a86afc11f38a45b541a49&#125;</span><br></pre></td></tr></table></figure><h3 id="六丶菜刀666"><a href="#六丶菜刀666" class="headerlink" title="六丶菜刀666"></a>六丶菜刀666</h3><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200630193551248.png" alt="image-20200630193551248"></p><p><strong>本题要点：</strong></p><ul><li>追踪TCP流</li></ul><p>看了很多人的WP，虽然说出了解题步骤，但思路啥的都没有说清楚，然后只能自己好好研究一下思路</p><p>打开首先发现有很多TCP包和HTTP包，首先要明白他在传输什么，所以需要先追踪一下HTTP流：</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200701140956772.png" alt="image-20200701140956772"></p><p>从<code>post</code>的内容看出就是一个菜刀连接服务器的流量，应该是执行了一个列出目录的命令，然后就看到了列出的目录里有<code>flag.txt</code>，然后猜测后面应该会有查看<code>flag.txt</code>文件的操作，但是很遗憾，查看完第一个http流还是没有有效的信息，然后只能接着查看下一个<code>HTTP</code>流，然后第二个<code>HTTP</code>流也没有什么重要的信息，第三个流有数据，但是应该是传输了一个无关紧要的<code>.deb</code>的软件包。</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200701163947030.png" alt="image-20200701163947030"></p><p>然后继续往下看，第7个HTTP流：</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200701181726275.png" alt="image-20200701181726275"></p><p>发现传输了一大串16进制数据，然后提取出来粘贴到<code>winhex</code>就发现了，这个文件头不就是JPG图片吗，然后保存得到了一串密码：</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200701181848815.png" alt="image-20200701181848815"></p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200701181946127.png" alt="image-20200701181946127"></p><p>然后继续查看HTTP流，第9个HTTP流又发现了不同：</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200701182129889.png" alt="image-20200701182129889"></p><p>杂项做得多了就一眼看出这是个zip压缩包的数据，然后这里直接复制粘贴到winhex会有问题，下面是<strong>文件提取</strong>，有两种方案：</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200701184148144.png" alt="image-20200701184148144"></p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/15171357208475.png!small" alt="Clipboard Image.png"></p><p>然后打开需要密码，尝试用之前得到的图片中的密码解密得到flag</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200701184504989.png" alt="image-20200701184504989"></p><p>flag：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">flag&#123;3OpWdJ-JP6FzK-koCMAK-VkfWBq-75Un2z&#125;</span><br></pre></td></tr></table></figure><h3 id="七丶被偷走的文件"><a href="#七丶被偷走的文件" class="headerlink" title="七丶被偷走的文件"></a>七丶被偷走的文件</h3><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/CTF%5B%E6%9D%82%E9%A1%B9%5D/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200701185150836.png" alt="image-20200701185150836"></p><h3 id="八丶秘密文件"><a href="#八丶秘密文件" class="headerlink" title="八丶秘密文件"></a>八丶秘密文件</h3><h3 id="九丶sqltest"><a href="#九丶sqltest" class="headerlink" title="九丶sqltest"></a>九丶sqltest</h3><h3 id="十丶sqltest"><a href="#十丶sqltest" class="headerlink" title="十丶sqltest"></a>十丶sqltest</h3><h3 id="十一丶john-in-the-middle"><a href="#十一丶john-in-the-middle" class="headerlink" title="十一丶john-in-the-middle"></a>十一丶john-in-the-middle</h3><h3 id="十二丶-安洵杯-2019-Attack"><a href="#十二丶-安洵杯-2019-Attack" class="headerlink" title="十二丶[安洵杯 2019]Attack"></a>十二丶[安洵杯 2019]Attack</h3><h3 id="十三丶-SUCTF2018-followme"><a href="#十三丶-SUCTF2018-followme" class="headerlink" title="十三丶[SUCTF2018]followme"></a>十三丶[SUCTF2018]followme</h3><h3 id="十四丶voip"><a href="#十四丶voip" class="headerlink" title="十四丶voip"></a>十四丶voip</h3><h3 id="十五丶-BSidesSF2019-table-tennis"><a href="#十五丶-BSidesSF2019-table-tennis" class="headerlink" title="十五丶[BSidesSF2019]table-tennis"></a>十五丶[BSidesSF2019]table-tennis</h3><h3 id="十六丶greatescape"><a href="#十六丶greatescape" class="headerlink" title="十六丶greatescape"></a>十六丶greatescape</h3><h3 id="十七丶-CFI-CTF-2018-webLogon-capture"><a href="#十七丶-CFI-CTF-2018-webLogon-capture" class="headerlink" title="十七丶[CFI-CTF 2018]webLogon capture"></a>十七丶[CFI-CTF 2018]webLogon capture</h3><h3 id="十八丶-XMAN2018排位赛-AutoKey"><a href="#十八丶-XMAN2018排位赛-AutoKey" class="headerlink" title="十八丶[XMAN2018排位赛]AutoKey"></a>十八丶[XMAN2018排位赛]AutoKey</h3><h3 id="十九丶-SUCTF2019-protocol"><a href="#十九丶-SUCTF2019-protocol" class="headerlink" title="十九丶[SUCTF2019]protocol"></a>十九丶[SUCTF2019]protocol</h3><h3 id="二十丶-BSidesSF2019-thekey"><a href="#二十丶-BSidesSF2019-thekey" class="headerlink" title="二十丶[BSidesSF2019]thekey"></a>二十丶[BSidesSF2019]thekey</h3><h3 id="二十一丶-RCTF2019-printer"><a href="#二十一丶-RCTF2019-printer" class="headerlink" title="二十一丶[RCTF2019]printer"></a>二十一丶[RCTF2019]printer</h3><p>二十二丶</p>]]></content:encoded>
      
      <comments>http://www.yym.show/2020-06-30-BUUCTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/#disqus_thread</comments>
    </item>
    
    <item>
      <title>TCP &amp;&amp; HTTP 报文字段解读</title>
      <link>http://www.yym.show/2020-06-27-TCP-&amp;&amp;-HTTP-%E6%8A%A5%E6%96%87%E5%AD%97%E6%AE%B5%E8%A7%A3%E8%AF%BB/</link>
      <guid>http://www.yym.show/2020-06-27-TCP-&amp;&amp;-HTTP-%E6%8A%A5%E6%96%87%E5%AD%97%E6%AE%B5%E8%A7%A3%E8%AF%BB/</guid>
      <pubDate>Sat, 27 Jun 2020 03:12:00 GMT</pubDate>
      <description>
      
      </description>
      
      
      <comments>http://www.yym.show/2020-06-27-TCP-&amp;&amp;-HTTP-%E6%8A%A5%E6%96%87%E5%AD%97%E6%AE%B5%E8%A7%A3%E8%AF%BB/#disqus_thread</comments>
    </item>
    
    <item>
      <title>bugku-流量分析刷题记录</title>
      <link>http://www.yym.show/2020-06-26-bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/</link>
      <guid>http://www.yym.show/2020-06-26-bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/</guid>
      <pubDate>Fri, 26 Jun 2020 07:37:00 GMT</pubDate>
      <description>
      
        
        
          &lt;h3 id=&quot;一、flag被盗&quot;&gt;&lt;a href=&quot;#一、flag被盗&quot; class=&quot;headerlink&quot; title=&quot;一、flag被盗&quot;&gt;&lt;/a&gt;一、flag被盗&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;本题要点：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;wireshark数
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h3 id="一、flag被盗"><a href="#一、flag被盗" class="headerlink" title="一、flag被盗"></a>一、flag被盗</h3><p><strong>本题要点：</strong></p><ul><li>wireshark数据包搜索</li></ul><p>这道题很简单，用到了wireshark数据包搜索的功能。直接在分组字节流搜索<code>flag</code>就能得到<code>flag</code></p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/JevXQSg4bw58Mlt.png" alt="image-20200626151117632"></p><p>flag：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">flag&#123;This_is_a_f10g&#125;</span><br></pre></td></tr></table></figure><h3 id="二、中国菜刀"><a href="#二、中国菜刀" class="headerlink" title="二、中国菜刀"></a>二、中国菜刀</h3><p><strong>本题要点：</strong></p><ul><li>wireshark基本使用：http协议+追踪流+显示分组字节、binwalk基本操作</li></ul><h4 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution-1"></a>Solution-1</h4><p>第一种解法直接追踪TCP流</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/32uSbPeR1cnDoqF.png" alt="image-20200626152515947"></p><p>发现流量包信息中包含flag.tar.gz，flag应该就包含在这个压缩包中。</p><p>使用binwalk进行分析：</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200705125552060.png" alt="image-20200705125552060"></p><p>文件中包含一个压缩包，使用binwalk进行提取，并解压缩，获得flag.txt，打开文本获得flag。</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/1Ok7CIKhGjlRX6u.png" alt="image-20200626153119312"></p><p>flag:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">key&#123;8769fe393f2b998fa6a11afe2bfcd65e&#125;</span><br></pre></td></tr></table></figure><h4 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution-2"></a>Solution-2</h4><p>首先拿到流量包先观察流量包，先分析http流量</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/hWCuinMxKYQ1rSb.png" alt="image-20200626160534139"></p><p>先查看200 ok的包的信息</p><p>第三个ok包里有数据，查看分组字节</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/RoNQS2bWaGvfJUz.png" alt="image-20200626161410941"></p><p>之前得到是一个压缩包，然后这里的X@Y是需要过滤然后解码为压缩</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200705125625797.png" alt="image-20200705125625797"></p><p>得到：</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/cLwQpxYujX4Z8G6.png" alt="image-20200626161610844"></p><h3 id="三、这么多数据包"><a href="#三、这么多数据包" class="headerlink" title="三、这么多数据包"></a>三、这么多数据包</h3><p><strong>本题要点：</strong></p><ul><li>getsheel特征</li><li>应用显示过滤器规则</li></ul><p>根据提示， 我们要找到 getshell 流， 经大佬提示， 一般 getshell 流的 TCP 的报文中很可能包含 command 这个字段， 我们可以通过<code>&lt; 协议 contains &quot;内容&quot; &gt;</code>来查找 getshell 流</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/bs9lWGavKfoxTmX.png" alt="image-20200626162135100"></p><p>通过追踪TCP流得到一段base64数据</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/JgWNrpdwcsG6KEC.png" alt="image-20200626162333342"></p><p>base解密得到flag</p><p>flag：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CCTF&#123;do_ you_like_sniffer&#125;|</span><br></pre></td></tr></table></figure><h3 id="四、手机热点"><a href="#四、手机热点" class="headerlink" title="四、手机热点"></a>四、手机热点</h3><p><strong>本题要点：</strong></p><ul><li>obex蓝牙协议</li><li>导出分组字节流</li></ul><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/9tsO7ZAH5PBEuq1.png" alt="image-20200626162552358"></p><p>首先打开流量包</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/SeAQy7C8hOVcaxD.png" alt="image-20200626165952359"></p><p>题目提示没有流量只能通过共享发送到电脑，没有流量通过共享来发送到电脑无疑只有两种方式，蓝牙和usb，不考虑usb，所以可能是蓝牙，所以用到的协议应该是蓝牙协议=</p><p>因为题目提示发了点小秘密，应该是发送了文件，所以推测设备间传输了数据，由此想到蓝牙间的数据传输协议</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/aH51hwXJfz8ldAy.png" alt="image-20200627091327326"></p><p>筛选出<code>obex协议</code>流量，发现传输了一个压缩包和一张图片。</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/NLpW5sx9BKzeQVr.png" alt="image-20200627091427807"></p><p>导出分组字节流得到压缩包</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/XwumfA4aEyMjJ2k.png" alt="image-20200627091558199"></p><p>解压得到flag：</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/MoW5FsHDfz9RlTA.png" alt="image-20200627091633923"></p><p>flag：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SYC&#123;this_is_bluetooth&#125;</span><br></pre></td></tr></table></figure><h3 id="五、抓到一只苍蝇"><a href="#五、抓到一只苍蝇" class="headerlink" title="五、抓到一只苍蝇"></a>五、抓到一只苍蝇</h3><p><strong>本题要点：</strong></p><ul><li>过滤post请求</li><li>去除TCP包头</li><li>伪加密</li><li>文件结构</li></ul><p>这道题较之前的题目难了很多</p><p>首先在分组字节流中尝试搜索一下<code>flag</code>，但是没有什么有用的东西，然后搜索<code>flag.</code>发现了<code>flag.txt</code></p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/RxFNrl2JodLfVhQ.png" alt="image-20200627152345353"></p><p>然后尝试导出http传输文件；</p><p>文件-&gt;导出对象-&gt;HTTP-&gt;save all</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/ZWXTVK4QGyDvk7w.png" alt="image-20200627152618553"></p><p>没有什么有用的东西；</p><p>然后继续分析，通过将tcp-data应用为列发现进行了数据交互</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/Ei7uZOr8kNwQSKt.png" alt="image-20200627153548569"></p><p>然后分析流量发现有客户端向qq邮箱传文件的流量，通过POST提交的流量，所以很容易观察到，然后可以发现有5个数据包是提交上去的。</p><p>然后先提取这5个数据包，先查看数据包大小，有四个是<code>131436bytes</code>,一个是<code>1777bytes</code></p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/vsDa7JAPLZlzEoQ.png" alt="image-20200627154005706"></p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/Dy72ImrTbBPEWZC.png" alt="image-20200627154235530"></p><p>由于是好几个文件，需要将其合并成一个文件，这里就需要去掉相同的文件头(TCP包有文件头的，所以还得去掉文件头)</p><p>由于TCP包头长度可变，所以需要知道传输的文件大小，分组字节流中查找size 可以看到文件大小是<code>525701</code></p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200627160105362.png" alt="image-20200627160105362"></p><p>131436*4+1777=527571-525701=1820/5=364需要每个文件去掉其364字节的文件头。</p><p><strong>kali linux shell命令dd</strong></p><p>命令格式为 dd if=文件名 bs=1 skip=364 of=要保存的文件名。例如dd if=1 bs=1 skip=364 of=1.1</p><p>依次把五个文件去掉文件头保存到另一文件</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/6ka3l5RHhq9PcDz.png" alt="image-20200627164058001"></p><p>然后把11-55扔到windows中</p><p>使用windows下cmd命令合并</p><p><strong>copy /B 文件1+文件2+… y.rar</strong>           这里是保存为rar，也有可能是jpg啥的</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/p5Z6GlPVqXzhWRu.png" alt="image-20200627161042435"></p><p>然后得到一个压缩包，但是在Windows下打开失败，这里是因为这个压缩包伪加密了，可以winhex改一下，也可以使用binwalk分离</p><p>84 90 改为 80 94</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/TDmHYJSU6C1seix.png" alt="image-20200627165517727"></p><p>binwalk分离</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/klbSYZywaOKA2NL.png" alt="image-20200627165610824"></p><p>但是打开了确是乱码，分析文件有972kb，可能是个可执行文件，可能文件结构上藏图片什么了。</p><p>先将<code>txt</code>改为<code>exe</code>，得到的是一堆苍蝇</p><p>然后再用<code>foremost</code>分离文件，我也不清楚为什么<code>binwalk</code>为什么分离不出来，就分离出来一堆压缩包</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/NrV38SyKTOMkoZY.png" alt="image-20200627170211613"></p><p>然后得到二维码，扫码得flag</p><p>flag：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">flag&#123;m1Sc_oxO2_Fly&#125;</span><br></pre></td></tr></table></figure><h3 id="六、日志审计"><a href="#六、日志审计" class="headerlink" title="六、日志审计"></a>六、日志审计</h3><p><strong>本题要点：</strong></p><ul><li>熟悉SQL注入流程</li><li>脚本</li></ul><p>下载压缩包，解压得到日志，很明显是一个sql注入的日志。先url解码一下，百分号看的头痛</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/oeZ4X2ivNa9xWsB.png" alt="image-20200627172022735"></p><p>然后先搜索一下flag，发现这里貌似在爆破flag，然后注意后面的状态码，可以知道哪些是成功爆破出来了</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/dfaZ5DhjKQztHvx.png" alt="image-20200627172203426"></p><p>然后我是直接去判断，脚本是不会写的，只能手动才能维持的了这样子，不过还好就那几个字，首先分析得到一串<code>ascii</code>码</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">102 108 97 103 123 115 113 108 109 52 112 95 49 53 95 112 48 119 101 114 102 117 108 125 1</span><br></pre></td></tr></table></figure><p>然后<code>ascii码</code>转字符串得到flag：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$a &#x3D; &quot;102 108 97 103 123 115 113 108 109 52 112 95 49 53 95 112 48 119 101 114 102 117 108 125 1&quot;;</span><br><span class="line">$b &#x3D; explode(&quot; &quot;,$a);</span><br><span class="line">$c &#x3D; substr_count($a,&#39; &#39;);</span><br><span class="line">for ($i&#x3D;0;$i&lt;&#x3D;$c;$i++)</span><br><span class="line">&#123;</span><br><span class="line">    $d &#x3D; intval($b[$i]);</span><br><span class="line">    echo chr($d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>flag：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">flag&#123;sqlm4p_15_p0werful&#125;</span><br></pre></td></tr></table></figure><h3 id="七、weblogic"><a href="#七、weblogic" class="headerlink" title="七、weblogic"></a>七、weblogic</h3><p><strong>本题要点：</strong></p><ul><li>分组字节流搜索</li></ul><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/o328gSLxMPHq7DN.png" alt="image-20200627200946373"></p><p>题目提示找出主机名，主机名为16进制</p><p>然后根据提示搜索分组字节流，搜索<code>hostname</code>得到两个结果</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/xzy4X1FQhoR67Ov.png" alt="image-20200628073829188"></p><p>然后尝试追踪tcp流，搜索<code>hostname</code>，因为题目提示主机为16进制，所以很容易发现下面有串16进制字符，加上flag格式成功提交</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/TMzDxaHgLWdmOF6.png" alt="image-20200628074052581"></p><p>flag：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">flag&#123;6ad4c5a09043&#125;</span><br></pre></td></tr></table></figure><h3 id="七、信息提取"><a href="#七、信息提取" class="headerlink" title="七、信息提取"></a>七、信息提取</h3><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/hOkexWwLCd6GmUc.png" alt="image-20200628081946781"></p><p><strong>本题要点：</strong></p><ul><li>熟悉SQL语句</li><li>编写python脚本能力</li></ul><p>因为题目提示是sqlmap跑的，然后观察流量包，发现GET请求挺多，就应该是一个GET请求的注入，然后就先过滤一下http协议得到：</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200629150715955.png" alt="image-20200628195800029"></p><p>得到了注入语句和回显，然后根据返回的状态码都是200，所以推测<code>sqlmap</code>是根据<code>包长</code>来判断回显。</p><p>然后就是先导出流量分析准备上脚本了：</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200629150715955.png" alt="image-20200629150715955"></p><p>分析语句写脚本：</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200629150804012.png" alt="image-20200629150804012"></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import re                      #正则模块</span><br><span class="line">import urllib.parse            #url编码模块</span><br><span class="line"></span><br><span class="line"># 更改为自己从wireshark提取出的csv文件地址</span><br><span class="line">f &#x3D; open(&quot;C:&#x2F;Users&#x2F;yiming&#x2F;Desktop&#x2F;222.csv&quot;)</span><br><span class="line">lines &#x3D; f.readlines()</span><br><span class="line">datas &#x3D; []</span><br><span class="line"># 转码, 保存进datas</span><br><span class="line">for line in lines:</span><br><span class="line">    datas.append(urllib.parse.unquote(line))      # urllib.parse.unquote是url解码</span><br><span class="line">                                                  # append() 方法用于在列表末尾添加新的对象。因为datas是空列表相当于转存</span><br><span class="line"></span><br><span class="line">lines &#x3D; []     # 这个lines保存注入flag的url</span><br><span class="line"># 提取出注入flag的url,len(datas)为列数，find() 方法检测字符串中是否包含子字符串，如果包含，返回索引值，datas[i:]返回所有提取flag的url</span><br><span class="line">for i in range(len(datas)):</span><br><span class="line">    if datas[i].find(&quot;isg.flags ORDER BY &#96;value&#96; LIMIT 0,1),1,1))&gt;64&quot;) &gt; 0:             </span><br><span class="line">        lines &#x3D; datas[i:]</span><br><span class="line">        break</span><br><span class="line"></span><br><span class="line">#Python 正则表达式</span><br><span class="line">#正则表达式是一个特殊的字符序列，它能帮助你方便的检查一个字符串是否与某种模式匹配。</span><br><span class="line">#Python 自1.5版本起增加了re 模块，它提供 Perl 风格的正则表达式模式。</span><br><span class="line">#re 模块使 Python 语言拥有全部的正则表达式功能。</span><br><span class="line">#compile 函数根据一个模式字符串和可选的标志参数生成一个正则表达式对象。该对象拥有一系列方法用于正则表达式匹配和替换。</span><br><span class="line">#re.match函数</span><br><span class="line">#re.match 尝试从字符串的起始位置匹配一个模式，如果不是起始位置匹配成功的话，match()就返回none。</span><br><span class="line">#re.search方法</span><br><span class="line">#re.search 扫描整个字符串并返回第一个成功的匹配。</span><br><span class="line">#re.match与re.search的区别</span><br><span class="line">#re.match只匹配字符串的开始，如果字符串开始不符合正则表达式，则匹配失败，函数返回None；而re.search匹配整个字符串，直到找到一个匹配。</span><br><span class="line">#re.compile 函数</span><br><span class="line"># compile 函数用于编译正则表达式，生成一个正则表达式（ Pattern ）对象，供 match() 和 search() 这两个函数使用。</span><br><span class="line">#group(num&#x3D;0)匹配的整个表达式的字符串，group() 可以一次输入多个组号，在这种情况下它将返回一个包含那些组所对应值的元组。</span><br><span class="line"># 用正则匹配</span><br><span class="line">flag &#x3D; &#123;&#125;</span><br><span class="line">macth1 &#x3D; re.compile(&quot;LIMIT 0,1\),(\d*),1\)\)&gt;(\d*) HTTP&#x2F;1.1&quot;)</span><br><span class="line">macth2 &#x3D; re.compile(&quot;localhost\&quot;,\&quot;HTTP\&quot;,\&quot;(\d&#123;3&#125;)&quot;)        #匹配字符串中有 HTTP 和 （\d*）和 HTTP&#x2F;1.1 200 ok的字符串，这三个条件用 逗号 分隔</span><br><span class="line">for i in range(0, len(lines), 2):                        # 因为有返回响应, 所以步长为2</span><br><span class="line">    get1 &#x3D; macth1.search(lines[i])</span><br><span class="line">    if get1:</span><br><span class="line">        key &#x3D; int(get1.group(1))  # key保存字符的位置.</span><br><span class="line">        # get1的值为：&lt;re.Match object; span&#x3D;(168, 196), match&#x3D;&#39;LIMIT 0,1),1,1))&gt;64 HTTP&#x2F;1.1&#39;&gt;</span><br><span class="line">        #get1的值是一个对象，get1.group（1）所匹配到的值是（\d&#123;3&#125;）,提取的是括号内的内容，get1.group(0)返回所有匹配字符</span><br><span class="line">        value &#x3D; int(get1.group(2))  # value保存字符的ascii编码</span><br><span class="line">        get2 &#x3D; macth2.search(lines[i + 1])</span><br><span class="line">        if get2:</span><br><span class="line">            if int(get2.group(1)) &gt; 450:</span><br><span class="line">                value +&#x3D;1</span><br><span class="line">        flag[key] &#x3D; value        # 用字典保存flag</span><br><span class="line">f.close()</span><br><span class="line">result &#x3D; &#39;&#39;</span><br><span class="line">for value in flag.values():</span><br><span class="line">    result +&#x3D; chr(value)</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure><p>flag:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ISG&#123;BLind_SQl_InJEcTi0N_DeTEcTEd&#125;</span><br></pre></td></tr></table></figure><h3 id="八、特殊后门"><a href="#八、特殊后门" class="headerlink" title="八、特殊后门"></a>八、特殊后门</h3><p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/06/30/zEUkFbhejytuDIo.png" alt="image-20200630091114581"></p><p><strong>本题要点：</strong></p><ul><li>搜索分组字节流</li></ul><p>一步直接秒杀，辣鸡题目</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200630094448738.png" alt="image-20200630094448738"></p><p>然后之后的icmp数据包就是flag</p><p><img src= "/img/loading.gif" data-src="https://images-1300363852.cos.ap-shanghai.myqcloud.com/bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/image-20200630094536518.png" alt="image-20200630094536518"></p><p>最终拼接字符串得到flag</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">flag&#123;Icmp_backdoor_can_transfer-some_infomation&#125;</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      <comments>http://www.yym.show/2020-06-26-bugku-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/#disqus_thread</comments>
    </item>
    
    <item>
      <title>IPSec配置</title>
      <link>http://www.yym.show/IPSec%E9%85%8D%E7%BD%AE/</link>
      <guid>http://www.yym.show/IPSec%E9%85%8D%E7%BD%AE/</guid>
      <pubDate>Mon, 22 Jun 2020 06:37:00 GMT</pubDate>
      <description>
      
        
        
          &lt;h3 id=&quot;一、R2和R3-配置-ipsec-隧道模式，内网nat&quot;&gt;&lt;a href=&quot;#一、R2和R3-配置-ipsec-隧道模式，内网nat&quot; class=&quot;headerlink&quot; title=&quot;一、R2和R3 配置 ipsec 隧道模式，内网nat&quot;&gt;&lt;/a&gt;一、R2和
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h3 id="一、R2和R3-配置-ipsec-隧道模式，内网nat"><a href="#一、R2和R3-配置-ipsec-隧道模式，内网nat" class="headerlink" title="一、R2和R3 配置 ipsec 隧道模式，内网nat"></a>一、R2和R3 配置 ipsec 隧道模式，内网nat</h3><p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/06/22/Tm9QU3AK1akdtVR.png" alt="image-20200622144316700"></p><h4 id="1、设置IP和路由"><a href="#1、设置IP和路由" class="headerlink" title="1、设置IP和路由"></a>1、设置IP和路由</h4><h4 id="2、设置IPSec"><a href="#2、设置IPSec" class="headerlink" title="2、设置IPSec"></a>2、设置IPSec</h4><ul><li>IKE配置</li><li>IPSec配置</li></ul><p><strong>IKE配置</strong></p><p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/06/22/p1q6cPBsOiS4kvJ.png" alt="image-20200622144600655"></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">R2(config)#crypto isakmp policy 1</span><br><span class="line">R2(config-isakmp)#encryption 3des</span><br><span class="line">R2(config-isakmp)#hash md5</span><br><span class="line">R2(config-isakmp)#authentication pre-share </span><br><span class="line">R2(config-isakmp)#group 1</span><br><span class="line">R2(config-isakmp)#exit</span><br><span class="line">R2(config)#crypto isakmp identity address </span><br><span class="line">R2(config)#crypto isakmp key 0 123456 address 10.2.1.2</span><br><span class="line"></span><br><span class="line">R3(config)#crypto isakmp policy 1</span><br><span class="line">R3(config-isakmp)#encryption 3des</span><br><span class="line">R3(config-isakmp)#hash md5</span><br><span class="line">R3(config-isakmp)#authentication pre-share</span><br><span class="line">R3(config-isakmp)#group 1</span><br><span class="line">R3(config-isakmp)#exit</span><br><span class="line">R3(config)#crypto isakmp identity address</span><br><span class="line">R3(config)#crypto isakmp key 0 123456 address 10.1.1.2</span><br></pre></td></tr></table></figure><p><strong>IPSec配置</strong></p><p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/06/22/FzoKxLu5DB3qQ1l.png" alt="image-20200622144629862"></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">R2(config)#crypto ipsec transform-set vpn ah-md5-hmac</span><br><span class="line">R2(cfg-crypto-trans)#mode tunnel</span><br><span class="line">R2(cfg-crypto-trans)#exit</span><br><span class="line">R2(config)#access-list 100 permit ip host 1.1.1.1 host 2.2.2.2</span><br><span class="line">R2(config)#crypto map map 1 ipsec-isakmp</span><br><span class="line">R2(config-crypto-map)#match address 100</span><br><span class="line">R2(config-crypto-map)#set peer 10.2.1.2</span><br><span class="line">R2(config-crypto-map)#set transform-set vpn</span><br><span class="line">R2(config-crypto-map)#exit</span><br><span class="line">R2(config)#int f0&#x2F;0</span><br><span class="line">R2(config-if)#crypto map map</span><br><span class="line"></span><br><span class="line">R3(config)#crypto ipsec transform-set vpn ah-md5-hmac </span><br><span class="line">R3(cfg-crypto-trans)#mode tunnel</span><br><span class="line">R3(cfg-crypto-trans)#exit</span><br><span class="line">R3(config)#access-list 100 permit ip host 2.2.2.2 host 1.1.1.1</span><br><span class="line">R3(config)#crypto map map 1 ipsec-isakmp</span><br><span class="line">R3(config-crypto-map)#match address 100</span><br><span class="line">R3(config-crypto-map)#set peer 10.1.1.2</span><br><span class="line">R3(config-crypto-map)#set transform-set vpn</span><br><span class="line">R3(config-crypto-map)#exit</span><br><span class="line">R3(config)#int f0&#x2F;1</span><br><span class="line">R3(config-if)#crypto map map</span><br></pre></td></tr></table></figure><h4 id="3、配置nat"><a href="#3、配置nat" class="headerlink" title="3、配置nat"></a>3、配置nat</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">R2(config)#int f0&#x2F;0</span><br><span class="line">R2(config-if)#ip nat outside</span><br><span class="line">R2(config-if)#int l0</span><br><span class="line">R2(config-if)#ip nat inside </span><br><span class="line">R2(config-if)#exit</span><br><span class="line">R2(config)#ip nat inside source static 1.1.1.1 10.1.1.3</span><br></pre></td></tr></table></figure><h3 id="二、IPSec交换集model模式和接口实验"><a href="#二、IPSec交换集model模式和接口实验" class="headerlink" title="二、IPSec交换集model模式和接口实验"></a>二、IPSec交换集model模式和接口实验</h3><p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/06/23/GHyjNaWXVrZovPY.png" alt="image-20200623133112305"></p><h4 id="实验一-不通过IPSec加密-："><a href="#实验一-不通过IPSec加密-：" class="headerlink" title="实验一(不通过IPSec加密)："></a>实验一(不通过IPSec加密)：</h4><h5 id="1、设置IP和路由-1"><a href="#1、设置IP和路由-1" class="headerlink" title="1、设置IP和路由"></a>1、设置IP和路由</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">设置好IP之后设置OSPF路由：</span><br><span class="line">R1(config)#ip route 0.0.0.0 0.0.0.0 192.168.10.1</span><br><span class="line"></span><br><span class="line">R2(config)#router ospf 1                                  </span><br><span class="line">R2(config-router)#network 10.0.0.0 0.0.0.255 area 0</span><br><span class="line">R2(config-router)#network 192.168.10.0 0.0.0.255 area 0</span><br><span class="line"></span><br><span class="line">R3(config)#router ospf 1</span><br><span class="line">R3(config-router)#network 10.0.0.0 0.0.0.255 area 0</span><br><span class="line">R3(config-router)#network 192.168.20.0 0.0.0.255 area 0</span><br><span class="line"></span><br><span class="line">R4(config)#ip route 0.0.0.0 0.0.0.0 192.168.20.1</span><br></pre></td></tr></table></figure><h5 id="2、设置IPSec-1"><a href="#2、设置IPSec-1" class="headerlink" title="2、设置IPSec"></a>2、设置IPSec</h5><p><strong>IKEY配置</strong></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">R2(config)#crypto isakmp policy 1</span><br><span class="line">R2(config-isakmp)#encryption 3des</span><br><span class="line">R2(config-isakmp)#hash md5</span><br><span class="line">R2(config-isakmp)#authentication pre-share </span><br><span class="line">R2(config-isakmp)#group 2</span><br><span class="line">R2(config-isakmp)#exit</span><br><span class="line">R2(config)#crypto isakmp identity address </span><br><span class="line">R2(config)#crypto isakmp key 0 123456 address 10.0.0.2</span><br><span class="line"></span><br><span class="line">R3(config)#crypto isakmp policy 1</span><br><span class="line">R3(config-isakmp)#encryption 3des</span><br><span class="line">R3(config-isakmp)#hash md5</span><br><span class="line">R3(config-isakmp)#authentication pre-share</span><br><span class="line">R3(config-isakmp)#group 2</span><br><span class="line">R3(config-isakmp)#exit</span><br><span class="line">R3(config)#crypto isakmp identity address</span><br><span class="line">R3(config)#crypto isakmp key 0 123456 address 10.0.0.1</span><br></pre></td></tr></table></figure><p><strong>IPSec配置</strong></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">R2(config)#crypto ipsec transform-set vpn1 ah-md5-hmac</span><br><span class="line">R2(cfg-crypto-trans)#mode transport require</span><br><span class="line">R2(cfg-crypto-trans)#exit</span><br><span class="line">R2(config)#access-list 100 permit ip host 10.0.0.1 host 10.0.0.2</span><br><span class="line">R2(config)#crypto map map1 1 ipsec-isakmp</span><br><span class="line">R2(config-crypto-map)#match address 100</span><br><span class="line">R2(config-crypto-map)#set peer 10.0.0.2</span><br><span class="line">R2(config-crypto-map)#set transform-set vpn1</span><br><span class="line">R2(config-crypto-map)#exit</span><br><span class="line">R2(config)#int f0&#x2F;0</span><br><span class="line">R2(config-if)#crypto map map1</span><br><span class="line"></span><br><span class="line">R3(config)#crypto ipsec transform-set vpn1 ah-md5-hmac</span><br><span class="line">R3(cfg-crypto-trans)#mode transport require</span><br><span class="line">R3(cfg-crypto-trans)#exit</span><br><span class="line">R3(config)#access-list 100 permit ip host 10.0.0.2 host 10.0.0.1</span><br><span class="line">R3(config)#crypto map map1 1 ipsec-isakmp</span><br><span class="line">R3(config-crypto-map)#match address 100</span><br><span class="line">R3(config-crypto-map)#set peer 10.0.0.1</span><br><span class="line">R3(config-crypto-map)#set transform-set vpn1</span><br><span class="line">R3(config-crypto-map)#exit</span><br><span class="line">R3(config)#int f0&#x2F;0</span><br><span class="line">R3(config-if)#crypto map map1</span><br></pre></td></tr></table></figure><h4 id="实验二（能通过）："><a href="#实验二（能通过）：" class="headerlink" title="实验二（能通过）："></a>实验二（能通过）：</h4><h5 id="1、设置IP和路由-2"><a href="#1、设置IP和路由-2" class="headerlink" title="1、设置IP和路由"></a>1、设置IP和路由</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">设置好IP之后设置OSPF路由：</span><br><span class="line">R1(config)#ip route 0.0.0.0 0.0.0.0 192.168.10.1</span><br><span class="line"></span><br><span class="line">R2(config)#router ospf 1                                  </span><br><span class="line">R2(config-router)#network 10.0.0.0 0.0.0.255 area 0</span><br><span class="line">R2(config-router)#network 192.168.10.0 0.0.0.255 area 0</span><br><span class="line"></span><br><span class="line">R3(config)#router ospf 1</span><br><span class="line">R3(config-router)#network 10.0.0.0 0.0.0.255 area 0</span><br><span class="line">R3(config-router)#network 192.168.20.0 0.0.0.255 area 0</span><br><span class="line"></span><br><span class="line">R4(config)#ip route 0.0.0.0 0.0.0.0 192.168.20.1</span><br></pre></td></tr></table></figure><h5 id="2、设置IPSec-2"><a href="#2、设置IPSec-2" class="headerlink" title="2、设置IPSec"></a>2、设置IPSec</h5><p><strong>IKEY配置</strong></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">R2(config)#crypto isakmp policy 1</span><br><span class="line">R2(config-isakmp)#encryption 3des</span><br><span class="line">R2(config-isakmp)#hash md5</span><br><span class="line">R2(config-isakmp)#authentication pre-share </span><br><span class="line">R2(config-isakmp)#group 2</span><br><span class="line">R2(config-isakmp)#exit</span><br><span class="line">R2(config)#crypto isakmp identity address </span><br><span class="line">R2(config)#crypto isakmp key 0 123456 address 10.0.0.2</span><br><span class="line"></span><br><span class="line">R3(config)#crypto isakmp policy 1</span><br><span class="line">R3(config-isakmp)#encryption 3des</span><br><span class="line">R3(config-isakmp)#hash md5</span><br><span class="line">R3(config-isakmp)#authentication pre-share</span><br><span class="line">R3(config-isakmp)#group 2</span><br><span class="line">R3(config-isakmp)#exit</span><br><span class="line">R3(config)#crypto isakmp identity address</span><br><span class="line">R3(config)#crypto isakmp key 0 123456 address 10.0.0.1</span><br></pre></td></tr></table></figure><p><strong>IPSec配置</strong></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">R2(config)#crypto ipsec transform-set vpn1 ah-md5-hmac</span><br><span class="line">R2(cfg-crypto-trans)#mode transport require</span><br><span class="line">R2(cfg-crypto-trans)#exit</span><br><span class="line">R2(config)#access-list 100 permit ip host 192.168.10.2 host 192.168.10.2</span><br><span class="line">R2(config)#crypto map map1 1 ipsec-isakmp</span><br><span class="line">R2(config-crypto-map)#match address 100</span><br><span class="line">R2(config-crypto-map)#set peer 192.168.20.2</span><br><span class="line">R2(config-crypto-map)#set transform-set vpn1</span><br><span class="line">R2(config-crypto-map)#exit</span><br><span class="line">R2(config)#int f0&#x2F;1</span><br><span class="line">R2(config-if)#crypto map map1</span><br><span class="line"></span><br><span class="line">R3(config)#crypto ipsec transform-set vpn1 ah-md5-hmac</span><br><span class="line">R3(cfg-crypto-trans)#mode transport require</span><br><span class="line">R3(cfg-crypto-trans)#exit</span><br><span class="line">R3(config)#access-list 100 permit ip host 192.168.20.2 host 192.168.10.2</span><br><span class="line">R3(config)#crypto map map1 1 ipsec-isakmp</span><br><span class="line">R3(config-crypto-map)#match address 100</span><br><span class="line">R3(config-crypto-map)#set peer 192.168.10.2</span><br><span class="line">R3(config-crypto-map)#set transform-set vpn1</span><br><span class="line">R3(config-crypto-map)#exit</span><br><span class="line">R3(config)#int f0&#x2F;1</span><br><span class="line">R3(config-if)#crypto map map1</span><br></pre></td></tr></table></figure><h4 id="实验三-通过IPSec加密-："><a href="#实验三-通过IPSec加密-：" class="headerlink" title="实验三(通过IPSec加密)："></a>实验三(通过IPSec加密)：</h4><h5 id="1、设置IP和路由-3"><a href="#1、设置IP和路由-3" class="headerlink" title="1、设置IP和路由"></a>1、设置IP和路由</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">设置好IP之后设置OSPF路由：</span><br><span class="line">R1(config)#ip route 0.0.0.0 0.0.0.0 192.168.10.1</span><br><span class="line"></span><br><span class="line">R2(config)#router ospf 1                                  </span><br><span class="line">R2(config-router)#network 10.0.0.0 0.0.0.255 area 0</span><br><span class="line">R2(config-router)#network 192.168.10.0 0.0.0.255 area 0</span><br><span class="line"></span><br><span class="line">R3(config)#router ospf 1</span><br><span class="line">R3(config-router)#network 10.0.0.0 0.0.0.255 area 0</span><br><span class="line">R3(config-router)#network 192.168.20.0 0.0.0.255 area 0</span><br><span class="line"></span><br><span class="line">R4(config)#ip route 0.0.0.0 0.0.0.0 192.168.20.1</span><br></pre></td></tr></table></figure><h5 id="2、设置IPSec-3"><a href="#2、设置IPSec-3" class="headerlink" title="2、设置IPSec"></a>2、设置IPSec</h5><p><strong>IKEY配置</strong></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">R2(config)#crypto isakmp policy 1</span><br><span class="line">R2(config-isakmp)#encryption 3des</span><br><span class="line">R2(config-isakmp)#hash md5</span><br><span class="line">R2(config-isakmp)#authentication pre-share </span><br><span class="line">R2(config-isakmp)#group 2</span><br><span class="line">R2(config-isakmp)#exit</span><br><span class="line">R2(config)#crypto isakmp identity address </span><br><span class="line">R2(config)#crypto isakmp key 0 123456 address 10.0.0.2</span><br><span class="line"></span><br><span class="line">R3(config)#crypto isakmp policy 1</span><br><span class="line">R3(config-isakmp)#encryption 3des</span><br><span class="line">R3(config-isakmp)#hash md5</span><br><span class="line">R3(config-isakmp)#authentication pre-share</span><br><span class="line">R3(config-isakmp)#group 2</span><br><span class="line">R3(config-isakmp)#exit</span><br><span class="line">R3(config)#crypto isakmp identity address</span><br><span class="line">R3(config)#crypto isakmp key 0 123456 address 10.0.0.1</span><br></pre></td></tr></table></figure><p><strong>IPSec配置</strong></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">R2(config)#crypto ipsec transform-set vpn1 ah-md5-hmac</span><br><span class="line">R2(cfg-crypto-trans)#mode tunnel</span><br><span class="line">R2(cfg-crypto-trans)#exit</span><br><span class="line">R2(config)#access-list 100 deny ip host 192.168.10.2 host 192.168.20.2</span><br><span class="line">R2(config)#access-list 100 permit ip any any</span><br><span class="line">R2(config)#crypto map map1 1 ipsec-isakmp</span><br><span class="line">R2(config-crypto-map)#match address 100</span><br><span class="line">R2(config-crypto-map)#set peer 10.0.0.2</span><br><span class="line">R2(config-crypto-map)#set transform-set vpn1</span><br><span class="line">R2(config-crypto-map)#exit</span><br><span class="line">R2(config)#int f0&#x2F;0</span><br><span class="line">R2(config-if)#crypto map map1</span><br><span class="line"></span><br><span class="line">R3(config)#crypto ipsec transform-set vpn1 ah-md5-hmac </span><br><span class="line">R3(cfg-crypto-trans)#mode tunnel</span><br><span class="line">R3(cfg-crypto-trans)#exit</span><br><span class="line">R3(config)#access-list 100 deny ip host 192.168.20.2 host 192.168.10.2</span><br><span class="line">R3(config)#access-list 100 permit ip any any</span><br><span class="line">R3(config)#crypto map map1 1 ipsec-isakmp</span><br><span class="line">R3(config-crypto-map)#match address 100</span><br><span class="line">R3(config-crypto-map)#set peer 10.0.0.1</span><br><span class="line">R3(config-crypto-map)#set transform-set vpn1</span><br><span class="line">R3(config-crypto-map)#exit</span><br><span class="line">R3(config)#int f0&#x2F;0</span><br><span class="line">R3(config-if)#crypto map map1</span><br></pre></td></tr></table></figure><h3 id="三、GRE隧道"><a href="#三、GRE隧道" class="headerlink" title="三、GRE隧道"></a>三、GRE隧道</h3><p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/06/23/kPp1GXg3jLC8ZoH.png" alt="image-20200623201159005"></p><h5 id="1、首先配置所有IP地址"><a href="#1、首先配置所有IP地址" class="headerlink" title="1、首先配置所有IP地址"></a>1、首先配置所有IP地址</h5><p>然后R1配置路由</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">R1(config)#ip route 0.0.0.0 0.0.0.0 10.1.1.1</span><br></pre></td></tr></table></figure><p>R2配置路由：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">R2(config-if)#ip route 0.0.0.0 0.0.0.0 100.1.1.2</span><br></pre></td></tr></table></figure><p>R4配置路由：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">R4(config)#ip route 0.0.0.0 0.0.0.0 200.1.1.2</span><br></pre></td></tr></table></figure><p>R5配置路由</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">R5(config)#ip route 0.0.0.0 0.0.0.0 192.168.1.3</span><br></pre></td></tr></table></figure><h5 id="2、GRE配置"><a href="#2、GRE配置" class="headerlink" title="2、GRE配置"></a>2、GRE配置</h5><p>R2配置：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">R2(config)#interface Tunnel2</span><br><span class="line">R2(config-if)#ip address 1.1.1.1 255.255.255.252</span><br><span class="line">R2(config-if)#tunnel source 100.1.1.1</span><br><span class="line">R2(config-if)#tunnel destination 200.1.1.1</span><br><span class="line">R2(config-if)#exit</span><br><span class="line">R2(config)#ip route 192.168.1.0 255.255.255.0 Tunnel2</span><br></pre></td></tr></table></figure><p>R4配置：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">R4(config)#interface Tunnel3</span><br><span class="line">R4(config-if)#ip address 1.1.1.2 255.255.255.252</span><br><span class="line">R4(config-if)#tunnel source 200.1.1.1 </span><br><span class="line">R4(config-if)#tunnel destination 100.1.1.1</span><br><span class="line">R4(config)#ip route 10.1.1.0 255.255.255.0 Tunnel3</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      <comments>http://www.yym.show/IPSec%E9%85%8D%E7%BD%AE/#disqus_thread</comments>
    </item>
    
    <item>
      <title>安装docker-ce和配置私有仓库</title>
      <link>http://www.yym.show/docker-ce+registry/</link>
      <guid>http://www.yym.show/docker-ce+registry/</guid>
      <pubDate>Sun, 21 Jun 2020 13:37:00 GMT</pubDate>
      <description>
      
        
        
          &lt;h3 id=&quot;一、第一题：安装docker-ce&quot;&gt;&lt;a href=&quot;#一、第一题：安装docker-ce&quot; class=&quot;headerlink&quot; title=&quot;一、第一题：安装docker-ce&quot;&gt;&lt;/a&gt;一、第一题：安装docker-ce&lt;/h3&gt;&lt;p&gt;先打开两台虚拟机。账
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h3 id="一、第一题：安装docker-ce"><a href="#一、第一题：安装docker-ce" class="headerlink" title="一、第一题：安装docker-ce"></a>一、第一题：安装docker-ce</h3><p>先打开两台虚拟机。账号：root。密码：000000</p><p>修改两张网卡，server1和server2 都要修改</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost &#x2F;]#vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-eno16777736</span><br></pre></td></tr></table></figure><p>按 i 修改，把最后一行 ONBOOT=no 改为 ONBOOT=yes 。然后esc，然后shift + 冒号        wq回车保存</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost &#x2F;]#vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-eno33554960</span><br></pre></td></tr></table></figure><p>按 i 修改，把最后一行 ONBOOT=no 改为 ONBOOT=yes 。</p><p>重启网卡</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost &#x2F;]#systemctl restart network</span><br></pre></td></tr></table></figure><p>查看server1 ip </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# ip a</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN </span><br><span class="line">    link&#x2F;loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1&#x2F;8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1&#x2F;128 scope host </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: eno16777736: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000</span><br><span class="line">    link&#x2F;ether 00:0c:29:30:f1:7a brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.52.145&#x2F;24 brd 192.168.52.255 scope global dynamic eno16777736</span><br><span class="line">       valid_lft 1525sec preferred_lft 1525sec</span><br><span class="line">    inet6 fe80::20c:29ff:fe30:f17a&#x2F;64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">3: eno33554960: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000</span><br><span class="line">    link&#x2F;ether 00:0c:29:30:f1:84 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.56.157&#x2F;24 brd 192.168.56.255 scope global dynamic eno33554960</span><br><span class="line">       valid_lft 1526sec preferred_lft 1526sec</span><br><span class="line">    inet6 fe80::20c:29ff:fe30:f184&#x2F;64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure><p>然后全在server2上操作</p><p>192.168.52.146为server2 ip地址</p><p>192.168.52.145为server1 ip地址</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost &#x2F;]#scp root@192.168.52.145:&#x2F;root&#x2F;Docker.tar.gz &#x2F;root</span><br></pre></td></tr></table></figure><p>然后解压：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost &#x2F;]#tar -zxvf Docker.tar.gz</span><br></pre></td></tr></table></figure><p>然后配置本地yum源</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost &#x2F;]#vi &#x2F;etc&#x2F;yum.repos.d&#x2F;local.repo</span><br></pre></td></tr></table></figure><p>输入内容：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[kubernetes]</span><br><span class="line">name&#x3D;kubernetes</span><br><span class="line">baseurl&#x3D;file:&#x2F;&#x2F;&#x2F;root&#x2F;Docker</span><br><span class="line">gpgcheck&#x3D;0</span><br><span class="line">enabled&#x3D;1</span><br></pre></td></tr></table></figure><p>保存退出</p><p>安装docker：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost &#x2F;]#yum install docker-ce-18.09.6 docker-ce-cli-18.09.6 containerd.io -y</span><br></pre></td></tr></table></figure><p>启动 Docker 并设置开机自启。  </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@master ~]# systemctl daemon-reload</span><br><span class="line">[root@master ~]# systemctl restart docker</span><br><span class="line">[root@master ~]# systemctl enable docker</span><br></pre></td></tr></table></figure><p>查看 Docker 的系统信息。  </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost &#x2F;]docker info</span><br></pre></td></tr></table></figure><h3 id="二、第二题安装私有仓库"><a href="#二、第二题安装私有仓库" class="headerlink" title="二、第二题安装私有仓库"></a>二、第二题安装私有仓库</h3><p>首先返回root文件夹，导入docker 镜像</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost &#x2F;]#cd &#x2F;root</span><br><span class="line">[root@localhost &#x2F;]#.&#x2F;image.sh</span><br></pre></td></tr></table></figure><p>启动registry容器</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost &#x2F;]#docker run -d -v &#x2F;opt&#x2F;registry:&#x2F;var&#x2F;lib&#x2F;registry -p 5000:5000</span><br><span class="line">--restart&#x3D;always --name registry registry:latest</span><br></pre></td></tr></table></figure><p>然后配置私有仓库</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost &#x2F;]# vi &#x2F;etc&#x2F;docker&#x2F;daemon.json</span><br></pre></td></tr></table></figure><p>内容设置为：</p><p>这个ip为server2ip</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;insecure-registries&quot;: [&quot;192.168.52.146:5000&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后重启配置文件和重启docker</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost &#x2F;]#systemctl daemon-reload</span><br><span class="line">[root@localhost &#x2F;]#systemctl restart docker</span><br></pre></td></tr></table></figure><p>然后标记镜像</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost &#x2F;]#docker tag centos:latest 192.168.52.146:5000&#x2F;centos:latest</span><br></pre></td></tr></table></figure><p>如要传其他镜像，将centos改为其他</p><p>然后上传镜像，这里可以多上传几个镜像，看刚哥要求</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost &#x2F;]#docker push 192.168.52.146:5000&#x2F;centos:latest</span><br></pre></td></tr></table></figure><p>然后查看仓库</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost &#x2F;]#curl -L http:&#x2F;&#x2F;192.168.52.146:5000&#x2F;v2&#x2F;_catalog</span><br></pre></td></tr></table></figure><p>{“repositories”:[“centos”]}  即成功</p><p>然后克隆一台server2，然后克隆机上打命令</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost &#x2F;]#docker images</span><br></pre></td></tr></table></figure><p>给刚哥看就好了</p>]]></content:encoded>
      
      <comments>http://www.yym.show/docker-ce+registry/#disqus_thread</comments>
    </item>
    
  </channel>
</rss>
